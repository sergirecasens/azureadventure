{"version":3,"file":"cryptoHelpers.browser.js","sourceRoot":"","sources":["../../../src/internal/cryptoHelpers.browser.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;;AAElC,0BAA0B;AAE1B;;;GAGG;AACH,MAAM,UAAgB,YAAY,CAAC,IAAwB;;QACzD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;QAEhG,6FAA6F;QAC7F,kFAAkF;QAClF,OAAO,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,IAAI,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAC9D,CAAC;CAAA;AAED;;;GAGG;AACH,MAAM,UAAgB,UAAU,CAAC,MAAc,EAAE,YAAoB;;QACnE,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAC5C,KAAK,EACL,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EACrD;YACE,IAAI,EAAE,MAAM;YACZ,IAAI,EAAE,SAAS;SAChB,EACD,KAAK,EACL,CAAC,MAAM,CAAC,CACT,CAAC;QAEF,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAC5C,MAAM,EACN,GAAG,EACH,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,CACvC,CAAC;QAEF,OAAO,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAChE,CAAC;CAAA","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\n/// <reference lib=\"dom\"/>\n\n/**\n * @internal\n * @ignore\n */\nexport async function sha256Digest(body: string | undefined): Promise<string> {\n  const digest = await self.crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(body || \"\"));\n\n  // The conversions here are a bit odd but necessary (see \"Unicode strings\" in the link below)\n  // https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/btoa\n  return btoa(String.fromCharCode(...new Uint8Array(digest)));\n}\n\n/**\n * @internal\n * @ignore\n */\nexport async function sha256Hmac(secret: string, stringToSign: string): Promise<string> {\n  const key = await self.crypto.subtle.importKey(\n    \"raw\",\n    Uint8Array.from(atob(secret), (c) => c.charCodeAt(0)),\n    {\n      name: \"HMAC\",\n      hash: \"SHA-256\"\n    },\n    false,\n    [\"sign\"]\n  );\n\n  const sigArray = await self.crypto.subtle.sign(\n    \"HMAC\",\n    key,\n    new TextEncoder().encode(stringToSign)\n  );\n\n  return btoa(String.fromCharCode(...new Uint8Array(sigArray)));\n}\n"]}